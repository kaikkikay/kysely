<!DOCTYPE html>
<html lang="fi">
<head>
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129797765-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129797765-1');
</script>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kysely</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  
      <link rel="stylesheet" href="style.css">

  
</head>

<body>
	
	<script>
	//osio 1
		$.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kyselyt",
                      function( data ) {
                
                var items = [];
                var lomakekentta = [];
                var kysymys = data.kysymys;
				var osio = data.osio;
                
		$.each(data, function(key, d) {
			
			if (d.osio == "osio1"){
		   items.push(d.kysymys + "<br><input type='text' id="+d.id+"><br>");
                   lomakekentta.push(d.id);
	      }
                })
		
		 
                       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake").show();
            });
		
		
		//osio2
		$.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kyselyt",
                      function( data ) {
                
                var items = [];
                var lomakekentta = [];
                var kysymys = data.kysymys;
				var osio = data.osio;
                
		$.each(data, function(key, d) {
			
			if (d.osio == "osio2"){
		   items.push(d.kysymys + "<br><input type='text' id="+d.id+"><br>");
                   lomakekentta.push(d.id);
	      }
                })
		
		 
                       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake1").show();
            });
		
		//osio 3
		$.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kyselyt",
                      function( data ) {
                
                var items = [];
                var lomakekentta = [];
                var kysymys = data.kysymys;
				var osio = data.osio;
                
		$.each(data, function(key, d) {
			
			if (d.osio == "osio3"){
		   items.push(d.kysymys + "<br><input type='text' id="+d.id+"><br>");
                   lomakekentta.push(d.id);
	      }
                })
		
		            
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake2").show();
            });
		
			function laheta() {
            
            var vastaus;
            var tunnus;
                
                for (i=0; i<lomakekentta.length; i++) {
                vastaus = document.getElementById(lomakekentta[i]).value;
                alert("'id':"+lomakekentta[i]+",'vastaus':' "+vastaus+"'");
                lahetys="'id':"+lomakekentta[i]+",'vastaus':' "+vastaus+"'"
                var myJSON = JSON.stringify(lahetys);
                    
                $.ajax({
                url: 'https://ohjelmistoprojekti-yksi.herokuapp.com/vastaus',
                type: 'POST',
                dataType: 'json',
                data: jsonData, 
                success: function() { alert('POST completed. Data:' + myJSON)}
                });   
                
                }
            }
    
           
	</script>
 <img src="helga_logo.png">
<div class="modal-wrap">
 <div class="modal-header"><span class="is-active"></span><span></span><span></span><span></span><span></span><span></span><span></span></div>
  <div class="modal-bodies">
    
     <div class="modal-body modal-body-step-1 is-showing">
      <div class="title">Helgan tutortoiminnan kehittäminen</div>
      <div class="description">Kyselyn tavoitteena on selvittää, kuinka Helgan tutortoimintaa voitaisiin parantaa.</div>
      <form>
        
        <div class="text-center">
          <div class="button">Aloita</div>
        </div>
      </form>
    </div>
    <div class="modal-body modal-body-step-2">
      <div  class="title">Yleistä tutortoiminnasta</div>
		<script>
		
               
			
		</script>
      
    <form  onsubmit="laheta()" style="text-align: center">
        <label>
          <div id="lomake" data-user="osio2" data-list-size="5"></div>
          <textarea type="text" id="field" onkeyup="countChar(this)"></textarea>
          
        </label>
   			 <div id="charNum"></div>
        <br><br>
        <div class="text-center fade-in">
          <div class="button">Seuraava</div>
        </div>
      </form>
    </div>
    
    <div class="modal-body modal-body-step-3">
      <div class="title">Ryhmäytyminen</div>
      <div class="description">Kuinka tyytyväinen olet ollut Helgan tutortoimintaan?</div>
      <form onsubmit="laheta()" style="text-align: center">
          <div id="lomake1">
          
          
          </div>
          <br><br>
         <div class="text-center fade-in">
          <div class="button">Seuraava</div>
        </div>
      </form>
    </div>
      
    <div class="modal-body modal-body-step-4">
      <div class="title">Perehdytys</div>
      <div class="description">Missä olisi parantamisen varaa?</div>
      <div id="lomake2" class="text-center fade-in"></div>
         <form onsubmit="laheta()" >
          <div class="button">Seuraava</div>
        
      </form>
    </div>
      
	  <div id="" class="modal-body modal-body-step-5">
      <div class="title">Kysymys 4</div>
      <div class="description">Oletko kiinnostunut toimimaan Helgan tutorina? Jos, niin miksi?</div>
      <form onsubmit="laheta()">
        <label>
          <textarea type="text" required name="Kysymys4"></textarea>
        </label>
        <div class="text-center fade-in">
          <div class="button">Seuraava</div>
        </div>
      </form>
    </div>
      
      <div class="modal-body modal-body-step-6">
      <div class="title">Kysymys 5</div>
      <div class="description">Millaisessa tilanteessa olet tarvinnut tutorilta apua?</div>
      <form onsubmit="laheta()">
        <label>
          <textarea type="text" required name="Kysymys5"></textarea>
        </label>
        <div class="text-center fade-in">
          <input type="submit" value="Submit">
        </div>
      </form>
    </div>
      
	   <div class="modal-body modal-body-step-7">
      <div class="title">Kiitos vastauksestanne!</div>
      <div class="description">Voit nyt sulkea selaimen.</div>
      <div class="text-center">
      </div>
    </div>
   
  </div>
</div>


    <script src="index.js"></script>

  <!-- JSON -->
        <script>
             
			
           
            function countChar(val) {
        var len = val.value.length;
        if (len >= 200) {
          val.value = val.value.substring(0, 200);
        } else {
          $('#charNum').text(200 - len);
        }
      };
			
			
            
			
        </script>
</body>
</html>
