<!DOCTYPE html>
<html lang="fi">

<head>

<meta Access-Control-Allow-Origin: *> 

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-129797765-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129797765-1');
</script>
  <meta charset="UTF-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Kysely</title>
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
  <script src="https://code.jquery.com/jquery-2.2.4.min.js"></script>
  
      <link rel="stylesheet" href="style.css">

  
</head>

<body>
		<script>
	//osio 1
        
        var lomakekentta = [];
		$.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kysymykset",
                      function( data ) {
                
                var items = [];
                
                var kysymysteksti = data.kysymysteksti;
				
                
		$.each(data, function(key, d) {
			
			if (d.tyyppi=="text") {
        items.push(d.kysymysteksti + "<br><input type="+d.tyyppi+ " id="+d.id+" ><br>");
        lomakekentta.push(d.id);
        }
            console.log("kysymyksentyyppi"+d.onRadio);
        
			/*if (d.dropdown==false) {
			
        items.push("<br>" + d.kysymysteksti + ":<br>");
            for (i = 0; i < d.vaihtoehdot.length; i++) {
                items.push("<input type=dropdown"+ " id="+d.id+" name=" + d.id+ " value="+d.vaihtoehdot[i].vastausvaihtoehto+" >" +d.vaihtoehdot[i].vastausvaihtoehto+"<br>");
                
            }lomakekentta.push(d.id);
        }*/
			if (d.onRadio==true) {
				console.log("kysymyksenvaihtoehdot" +d.vaihtoehdot)
			
        items.push("<br>" + d.kysymysteksti + ":<br>");
            for (i = 0; i < d.vaihtoehdot.length; i++) {
                items.push("<input type=radio"+ " id="+d.id+" name=" + d.id+ " value="+d.vaihtoehdot[i].vastausvaihtoehto+" >" +d.vaihtoehdot[i].vastausvaihtoehto+"<br>");
            }lomakekentta.push(d.id);
        }
			
			/*if ( d.checkbox==false) {
			
        items.push("<br>" + d.kysymysteksti + ":<br>");
            for (i = 0; i < d.vaihtoehdot.length; i++) {
                items.push("<input type=checkbox"+ " id="+d.id+" name=" + d.id+ " value="+d.vaihtoehdot[i].vastausvaihtoehto+" >" +d.vaihtoehdot[i].vastausvaihtoehto+"<br>");
                
            }lomakekentta.push(d.id);
        }*/
        
			
			if (d.osio == "Henkilötiedot"){
		   items.push(d.kysymysteksti + "<br><input type='radio' id="+d.id+"><br>");
                   lomakekentta.push(d.id);
	      }
                })
       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake").show();
            }); 
        
            
       // osio 2
        $.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kysymykset",
                      function( data ) {
                
                var items = [];
                
                var kysymysteksti = data.kysymysteksti;
				
                
		$.each(data, function(key, d) {
			
			if (d.tyyppi=="text") {
        items.push(d.kysymysteksti + "<br><input type="+d.tyyppi+ " id="+d.id+" ><br>");
        lomakekentta.push(d.id);
        }
            
        if (d.tyyppi=="radio" || d.tyyppi=="checkbox") { 
        items.push("<br>" + d.kysymysteksti + ":<br>");
            for (i = 0; i < d.value.length; i++) {
                items.push("<input type="+d.tyyppi+ " id="+d.id+" name=" + d.id+ " value="+d.value[i]+" >" +d.value[i]+"<br>");
                
            }lomakekentta.push(d.id);
        }
        
			if (d.osio == "Yleistä tutortoiminnasta"){
		   items.push(d.kysymysteksti + "<br><input type='text' id="+d.id+"><br>");
                   lomakekentta.push(d.id);
	      }
                })
       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake1").show();
            });  
         
            // osio 3
        $.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kysymykset",
                      function( data ) {
                
                var items = [];
                
                var kysymysteksti = data.kysymysteksti;
				
                
		$.each(data, function(key, d) {
			
			if (d.tyyppi=="text") {
        items.push(d.kysymysteksti + "<br><input type="+d.tyyppi+ " id="+d.kysymysid+" ><br>");
        lomakekentta.push(d.kysymysid);
        }
            
        if (d.tyyppi=="radio" || d.tyyppi=="checkbox") { 
        items.push("<br>" + d.kysymys + ":<br>");
            for (i = 0; i < d.value.length; i++) {
                items.push("<input type="+d.tyyppi+ " id="+d.kysymysid+" name=" + d.kysymysid+ " value="+d.value[i]+" >" +d.value[i]+"<br>");
                
            }lomakekentta.push(d.id);
        }
        
			if (d.osio == "Ryhmäytyminen"){
		   items.push(d.kysymysteksti + "<br><input type='text' id="+d.kysymysid+"><br>");
                   lomakekentta.push(d.kysymysid);
	      }
                })
       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake2").show();
            });  
			
			//osio 4
			
			$.getJSON("https://ohjelmistoprojekti-yksi.herokuapp.com/kysymykset",
                      function( data ) {
                
                var items = [];
                
                var kysymysteksti = data.kysymysteksti;
				
                
		$.each(data, function(key, d) {
			
			if (d.tyyppi=="text") {
        items.push(d.kysymysteksti + "<br><input type="+d.tyyppi+ " id="+d.kysymysid+" ><br>");
        lomakekentta.push(d.kysymysid);
        }
            
        if (d.tyyppi=="radio" || d.tyyppi=="checkbox") { 
        items.push("<br>" + d.kysymys + ":<br>");
            for (i = 0; i < d.value.length; i++) {
                items.push("<input type="+d.tyyppi+ " id="+d.kysymysid+" name=" + d.kysymysid+ " value="+d.value[i]+" >" +d.value[i]+"<br>");
                
            }lomakekentta.push(d.id);
        }
        
			if (d.osio == "Koulun opiskelutyökalujen käyttö"){
		   items.push(d.kysymysteksti + "<br><input type='text' id="+d.kysymysid+"><br>");
                   lomakekentta.push(d.kysymysid);
	      }
                })
       
            $( "<div/>", {
				
            html: items.join( "" )}).appendTo("#lomake3").show();
            });  
        
            
			
			
        
	</script>
 <img src="helga_logo.png">
<div class="modal-wrap">
 <div class="modal-header"><span></span><span onclick="takaisin"></span><span></span><span></span><span></span></div>
  <div class="modal-bodies">
    
     <div class="modal-body modal-body-step-1 is-showing">
      <div class="title">Helgan tutortoiminnan kehittäminen</div>
      <div class="description">Kyselyn tavoitteena on selvittää, kuinka Helgan tutortoimintaa voitaisiin parantaa.</div>
      <form>
        
        <div class="text-center">
          <div class="button">Aloita</div>
        </div>
      </form>
    </div>
    
	  <div id="perustiedot"  class="modal-body modal-body-step-2">
      <div  class="title">Perustiedot</div>
    <form  onsubmit="laheta()" style="text-align: center">
        <label>
          <div id="lomake" data-user="osio2" data-list-size="5"></div>
        <!---- <textarea type="text" id="field" onkeyup="countChar(this)"></textarea> 
          <div id="charNum"></div> -->
        </label>
   			 
        <br><br>
        <div class="text-center fade-in">
          <div class="button">Seuraava</div>
        </div>
      </form>
    </div>
    
    <div class="modal-body modal-body-step-3">
      <div class="title">Yleistä tutortoiminnasta</div>
      <form onsubmit="laheta()" style="text-align: center">
         <label><div id="lomake1"></div></label>
         
          
          <br><br>
         <div class="text-center fade-in">
          <div class="button">Seuraava</div>
        </div>
      </form>
    </div>
      
    <div class="modal-body modal-body-step-4">
      <div class="title">Ryhmäytyminen</div>
      <div class="description"></div>
         <form onsubmit="laheta()" style= "text-align: center">
             <label><div id="lomake2"></div></label>
          <div class="text-center fade-in">
             <div class="button">Seuraava</div>
        </div>
      </form>
          
    </div>
      
    <div class="modal-body modal-body-step-5">
      <div class="title">Koulun opiskelutyökalujen käyttö</div>
      <label><div id="lomake3"></div></label>
      <form onsubmit="laheta()">
        
        <div class="text-center fade-in">
          <button onClick="laheta()"> Lähetä </button>
        </div>
      </form>
    </div> 
      
     <!-- <div class="modal-body modal-body-step-6">
      <div class="title">Kysymys 5</div>
      <div id="lomake4"> </div>
      <form onsubmit="laheta()">
        
        <div class="text-center fade-in">
          
        </div>
      </form>
    </div> -->
      
	   <div class="modal-body modal-body-step-7">
      <div class="title">Kiitos vastauksestanne!</div>
      <div class="description">Voit nyt sulkea kyselyn.</div>
      <div class="text-center">
      </div>
    </div>
   
  </div>
</div>


    <script src="index.js"></script>

  <!-- JSON -->
        <script>
		
		var lahetys;
			
			function laheta() {


    var tyyppi;
    var vastaus;
    

    for (i = 0; i < lomakekentta.length; i++) {
        tyyppi = document.getElementById(lomakekentta[i]).type;
        var radios = document.getElementsByName(lomakekentta[i]);
        var checkbox = document.getElementsByName(lomakekentta[i]);
        
        if (tyyppi == "text" || tyyppi == "textarea") {
            vastaus = document.getElementById(lomakekentta[i]).value;
            lahetys = "Vastaus: " + vastaus;
           console.log(lahetys);
        }

        if (onRadio == "radio") {
            for (var x = 0, length = radios.length; x < length; x++) {
                if (radios[x].checked) {
                    vastaus = radios[x].value;
                    lahetys = "Kysymys: " + lomakekentta[i] + ", Vastaus: " + vastaus;
                   
                }
            }
        }

        if (tyyppi == "checkbox") {
            for (var x = 0, length = checkbox.length; x < length; x++) {

                if (checkbox[x].checked) {
                    vastaus = checkbox[x].value;
                    lahetys = "Kysymys: " + lomakekentta[i] + ", Vastaus: " + vastaus;
                   
                }
            }
        }


    }
}
            
 var myJSON = lahetys;

$.ajax({
 url: 'https://ohjelmistoprojekti-yksi.herokuapp.com/vastaus',
 type: 'POST',
 dataType: 'json', 
 success: function() { alert('POST completed. Data:' + myJSON)}
});
            
           
     function goBack() {
    document.getElementById("perustiedot").innerHTML;
}
            
			
        </script>
</body>
</html>
